<meta charset="UTF-8">
<!-- Header -->
	<header>
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="intro-text">
						<span class="name">{{Titulo}}</span>
					</div>
				</div>
			</div>
		</div>
	</header>

	<!-- Portfolio Grid Section -->
	<section class="grid form_empresa" ng-controller="GetEmpresaController">
		<div class="container">

			<div class="row">
				<div class="col-lg-8 col-lg-offset-2">
					<!-- To configure the contact form email address, go to mail/contact_me.php and update the email address in the PHP file on line 19. -->
					<!-- The form should work on most web servers, but if the form is not working you may need to configure your web server differently. -->
					
					<form name="sentMessage" id="contactForm" novalidate>
					
						<input type="hidden"id="nome" ng-model="empresa.id">
						
						<div class="form-group last">
					       
					        
					        <div ngf-drop ng-model="picFile" ngf-pattern="image/*"  class="cropArea col-xs-7" >
					             
					            <img-crop image="picFile  | ngfDataUrl"                 
					            result-image="croppedDataUrl" ng-init="croppedDataUrl=''">
					            </img-crop>
					           
					           
					        </div>
					        <div class="col-xs-5">
					        	<div class="form-group btn-group col-xs-12">
									<button ngf-select ng-model="picFile" accept="image/*" class="btn btn-default btn-sm to-left"> Buscar Imagem </button>
							        <button ng-click="upload(croppedDataUrl, picFile.name)" class="btn btn-success btn-sm to-left" > Confirmar Imagem </button> 						        	
					        	
					        	</div>
						        
						        

						        <div class="image_circle">
									<img class="image_user" id="ItemPreview" src="http://localhost:8080/CRM/rest/restFoto/RetornaImagem/{{empresa.idfoto}}"/>
	             														    
						            <!-- <img ng-src="{{croppedDataUrl}}" /> -->
							        					            
						        </div>
					        	<div class="form-group btn-group col-xs-12">
									<span class="success">{{imagemresult}}</span>
							        <span class="danger" ng-show="errorMsg">{{errorMsg}}</span>							        	
					        	</div>

					        </div>
					       
						</div>	
						
						<div class="row control-group">
						
							<div 
								class="form-group col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
								
								<h3>DADOS GERAIS</h3>
								
								<label>Razão Social</label> 
								<input type="text" ng-model="empresa.razaosocial" class="form-control"
									placeholder="Razão Social" id="nome" required
									data-validation-required-message="Por favor insira um nome">
								<p class="help-block text-danger"></p>
							</div>
							
						</div>

						<div class="row control-group">

							<div 
								class="form-group col-xs-6 floating-label-form-group controls floating-label-form-group-with-value">
								<label>Tipo</label> 
								
								<select class="form-control" required data-validation-required-message="Por favor selecione um tipo de empresa"
									    ng-options="tipoempresa.nome for tipoempresa in tiposempresa track by tipoempresa.id" ng-model="empresa.tipoempresa" >    
									    <option value="">Tipo Empresa</option>
									</select>	

								<p class="help-block text-danger"></p>

							</div>

						</div>
						
						<div class="row control-group">

							<div
								class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
								<label>CNPJ</label> <input ng-model="empresa.cnpj" type="text" class="form-control cnpj"
									placeholder="CNPJ" id="cnpj" required
									data-validation-required-message="Por favor insira um nome">

								<p class="help-block text-danger"></p>
							</div>
							
							<div
								class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
								<label>Inscrição Estadual</label> <input ng-model="empresa.inscricaoestadual" type="text" class="form-control"
									placeholder="Inscrição Estadual" id="inscricaoestadual" required
									data-validation-required-message="Por favor insira um nome">

								<p class="help-block text-danger"></p>
							</div>

						</div>
						
						<div class="row control-group">

							<div
								class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
								<label>Ramo</label> <input ng-model="empresa.ramo" type="text" class="form-control"
									placeholder="Ramo" id="ramo" required
									data-validation-required-message="Por favor insira um nome">

								<p class="help-block text-danger"></p>
							</div>
							
							<div
							class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
								<label>Site</label> <input ng-model="empresa.site" type="text" class="form-control"
									placeholder="Site" id="site" required
									data-validation-required-message="Por favor insira um nome">

								<p class="help-block text-danger"></p>
							</div>

						</div>
						

						<div class="row control-group">
							<div
								class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
							<label>Endereço</label>
								<input type="text" class="form-control" ng-model="empresa.endereco" data-validation-required-message="Please enter your phone." 
								placeholder="Endereço">
								<p class="help-block text-danger"></p>
							</div>
							
							<div
								class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
							<label>Bairro</label>
								<input type="text" ng-model="empresa.bairro" class="form-control" placeholder="Bairro" id="Bairro" required data-validation-required-message="Por favor preencha o campo bairro.">
								<p class="help-block text-danger"></p>
							</div>

						</div>
						
						<div class="row control-group">
							<div 
								class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
							<label>Número</label>
								<input type="text" ng-model="empresa.numero" id="numero" class="form-control" placeholder="Número" required data-validation-required-message="Please enter your phone number.">
								<p class="help-block text-danger"></p>
							</div>

							<div 
								class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
								<label>CEP</label>
								 <input type="text" ng-model="empresa.cep"  class="form-control cep" placeholder="CEP" id="cep" required data-validation-required-message="Please enter your email address.">
								<p class="help-block text-danger"></p>
							</div>
							
						</div>
						
						<div class="row control-group">

							<div
								class="form-group col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
							
								<label>Complemento</label>
								<input type="tel" class="form-control" ng-model="empresa.complemento" data-validation-required-message="Please enter your phone number." placeholder="Complemento">
								<p class="help-block text-danger"></p>
							</div>
						</div>
		
						<div class="row control-group">
								<div
								class="form-group col-sm-6 col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
								<label>Cidade</label> 
								
								<select class="form-control" required data-validation-required-message="Por favor selecione uma cidade"
									    ng-options="cidade.nome for cidade in cidades track by cidade.id" ng-model="empresa.cidade" >    
									    <option value="">Cidade</option>
									</select>	

								<p class="help-block text-danger"></p>

							</div>
									
							<div class="form-group col-xs-6 floating-label-form-group controls floating-label-form-group-with-value">
								<label>Estado - País</label>
								<select  class="form-control estado" required data-validation-required-message="Por favor selecione um estado." >

									<option ng-repeat="estado in estados" value="16" ng-selected="$first">{{estado.nome + ' - ' + estado.pais}}</option>

								</select>
								<p class="help-block text-danger"></p>
							</div>							

						</div>
						
						<div class="row control-group">

							<div
								class="form-group col-xs-6 floating-label-form-group controls floating-label-form-group-with-value">
								<label>Usuário Responsável</label>
								<select class="form-control" required data-validation-required-message="Por favor selecione um contato"
							    ng-options="usuario.nome for usuario in usuarios track by usuario.id" ng-model="empresa.usuarioresponsavel" >
								    <option value="">Usuário Responsável</option>
								</select>

								<p class="help-block text-danger"></p>

							</div>

							<div 
								class="form-group col-xs-12 col-sm-6 floating-label-form-group controls floating-label-form-group-with-value">
								<label>Data de Cadastro</label> 
								<input type="text" class="form-control date" data-mask="00/00/0000"  placeholder="Data de Cadastro" ng-model="empresa.datacadastro" min="1901-01-01" max="2016-12-31"id="data_cadastro" required data-validation-required-message="Please enter your name.">
								<p class="help-block text-danger"></p>
							</div>

						</div>

						<div class="row control-group">

							<div 
								class="form-group col-xs-12 floating-label-form-group controls floating-label-form-group-with-value">
								
								<label>Status</label> 
			      				<select class="form-control" required data-validation-required-message="Por favor selecione um tipo de usuário"
							    ng-options="status for status in statuslist" ng-model="empresa.status" >    
								    <option value="">Status</option>
								</select>	
							 	<p class="help-block text-danger"></p>
							</div>
							
						</div>
						
						<div class="row control-group">
						
							<h3>TELEFONES</h3>

							<div class="col-xs-12 ">
								<div class="col-xs-10">

									<div class="form-group col-sm-4 col-xs-12 floating-label-form-group controls ">
										<label>Tipo</label> 
										<input type="hidden" ng-model="telefone.id" />
										<select class="form-control" id="tipotelefone" required data-validation-required-message="Por favor selecione um tipo de usuário"
										    ng-options="tipotelefone.nome for tipotelefone in tipostelefone track by tipotelefone.id" ng-model="telefone.tipotelefone" >    
										    <option value="">Tipo</option>
										</select>	
										<p class="help-block text-danger"></p>
									</div>
									<div class="form-group col-sm-6 col-xs-12 floating-label-form-group controls  ">
										<label>Número</label> 
										<input type="text" id="numero" ng-model="telefone.numero" class="form-control phone" placeholder="Número"
											id="Nome do contato" required
											data-validation-required-message="Por favor insira um nome">
										<p class="help-block text-danger"></p>
									</div>

								</div>
								<div class="col-xs-2 btn-group">
									<a class="btn btn-success btn-sm" href="javascript:void(0)" data-ng-click='addTelefone()'>Salvar</a>

								</div>


							</div>
						</div>

						<!-- Gerenciar Telefones da Empresa-->
						<div class="row ">

							<div class="table-scrollable table-scrollable-borderless">
								<table class="table table-hover table-light col-xs-12">
									<thead>
										<tr class="uppercase">											
											<th>Tipo</th>
											<th>Número</th>
											<th></th>
										</tr>
									</thead>
									<tbody>
									   <tr data-ng-repeat="telefone in listTelefones">							                
							                <td>{{telefone.tipotelefone.nome}}</td>
							                <td>{{telefone.numero}}</td>
											<td class="btn-group">
												<a class="btn btn-warning  btn-sm" target="_blank" href="javascript:void(0)" ng-click='selectEditTelefone(telefone.id)'>Editar</a>
												<a class="btn btn-danger btn-sm" href="javascript:void(0)" ng-click='delTelefone(telefone.id)'>Excluir</a>
											</td>
										</tr>
										
									</tbody>
								</table>
							</div>

						</div>
						
						
						<!-- Gerenciar Comunicadores da Empresa-->
						<div class="row control-group">
							<h3>COMUNICADORES</h3>


							<div class="col-xs-12 ">
								<div class="col-xs-10">

									<div class="form-group col-sm-4 col-xs-12 floating-label-form-group controls ">
										<label>Tipo</label> 
										<input type="hidden" ng-model="comunicador.id" />
										<select class="form-control" id="tipocomunicador" required data-validation-required-message="Por favor selecione um tipo de comunicador"
										    ng-options="tipocomunicador.nome for tipocomunicador in tiposcomunicador track by tipocomunicador.id" ng-model="comunicador.tipocomunicador" >    
										    <option value="">Tipo</option>
										</select>	
										<p class="help-block text-danger"></p>
									</div>
									<div class="form-group col-sm-6 col-xs-12 floating-label-form-group controls  ">
										<label>Endereço</label> 
										<input type="email" id="comunicador.nome" ng-model="comunicador.nome" class="form-control" placeholder="Endereço"
											id="Nome do Comunicador" required data-validation-required-message="Por favor insira um nome">
										<p class="help-block text-danger"></p>
									</div>									

								</div>
								<div class="col-xs-2 btn-group">
									<a class="btn btn-success btn-sm" href="javascript:void(0)" data-ng-click='addComunicador()'>Salvar</a>

								</div>


							</div>
						</div>


						<div class="row ">
						
							<div class="table-scrollable table-scrollable-borderless">
								<table class="table table-hover table-light col-xs-12">
									<thead>
										<tr class="uppercase">											
											<th>Tipo</th>
											<th>Endereço</th>
											<th></th>
										</tr>
									</thead>
									<tbody>
									   <tr data-ng-repeat="comunicador in listComunicadores">							                
							                <td>{{comunicador.tipocomunicador.nome}}</td>
							                <td>{{comunicador.nome}}</td>
											<td class="btn-group">
												<a class="btn btn-warning  btn-sm" target="_blank" href="javascript:void(0)" ng-click='selectEditComunicador(comunicador.id)'>Editar</a>
												<a class="btn btn-danger btn-sm" href="javascript:void(0)" ng-click='delComunicador(comunicador.id)'>Excluir</a>
											</td>
										</tr>
										
									</tbody>
								</table>
							</div>

						</div>

						<div class="row control-group">
							<h3>CONTATOS</h3>

							<div class="form-group col-sm-6 col-xs-12 floating-label-form-group controls ">
										<label>Contato</label> 
										<input type="hidden" ng-model="empresa.id" />
										<select class="form-control" id="contatoempresa" required data-validation-required-message="Por favor selecione um contato"
										    ng-options="contato.nome for contato in contatos track by contato.id" ng-model="contato" >    
										    <option value="">Contato</option>
										</select>	
										<p class="help-block text-danger"></p>
							</div>
							<div class="btn-group">
								<a class="btn btn-success btn-sm" href="javascript:void(0)" data-ng-click='addContato()'>Adicionar</a>
								<a class="btn btn-warning btn-sm" target="_blank" href="#/Contato/Cadastrar">Novo</a>
							</div>
							
						</div>

						<div class="row ">
						
							<div class="table-scrollable table-scrollable-borderless">
								<table class="table table-hover table-light col-xs-12">
									<thead>
										<tr class="uppercase">		
											<th></th>								 
											<th>Matrícula</th>
											<th>Nome</th>											
											<th></th>
										</tr>
									</thead>
									<tbody>
									   <tr data-ng-repeat="contato in listContatos">
									   		<td class="fit">
												<img class="user-pic img-circle" style="width:41px;height:41px;"src="http://localhost:8080/CRM/rest/restFoto/RetornaImagem/{{contato.idfoto}}">
											</td>
							                <td>{{contato.id}}</td>
							                <td>{{contato.nome}}</td>
											 <td class="btn-group">
												<a class="btn btn-warning btn-sm" target="_blank" href="#/Contato/Editar/{{contato.id}}">Ver</a>
												<a class="btn btn-danger btn-sm" href="javascript:void(0)" ng-click='delContato(contato.id)'>Excluir</a>
											</td>
										</tr>
										
									</tbody>
								</table>
							</div>
						</div>


						<div id="success">{{Resposta}}</div>
						<div class="row">
							<div class="form-group btn-group col-xs-12">

								<a class="btn btn-danger btn-lg to-left" href="#/Empresa">Voltar</a>
								<button type="submit" class="btn btn-success btn-lg to-right" ng-click='EnviarInformacao()'>Salvar</button>
							</div>
						</div>
						
					</form>
				</div>
			</div>
	</section>